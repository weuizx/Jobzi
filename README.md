# Jobzi

Telegram-бот платформа для быстрого подбора персонала в неформальном секторе

## Описание проекта

Jobzi - это автоматизированная платформа для подбора временного персонала, предназначенная для малых бригад, прорабов, фермеров и частных заказчиков. Платформа работает полностью в Telegram и не требует установки дополнительного ПО.

### Целевая аудитория

Прорабы, бригадиры, фермеры и организаторы небольших рабочих команд, которым необходимо оперативно набирать людей на временную, сдельную или вахтовую работу — в строительстве, сельском хозяйстве, монтаже, погрузке и других сферах физического труда.

### Проблема

Целевые работодатели вынуждены вручную искать и отбирать кандидатов в Telegram-чатах, соцсетях и на досках объявлений, сталкиваясь с:
- **Хаосом в откликах** — резюме приходят в разных форматах, без структуры
- **Низкой вовлечённостью** — сложно отследить, кто откликнулся, кто подходит
- **Отсутствием инструментов автоматизации** — нет анкет, рассылок, фильтрации
- **Потерей времени** — до 80% времени уходит не на подбор, а на сбор и сортировку данных
- **Ненадёжной коммуникацией** — нет истории взаимодействия с кандидатами

### Решение

Автоматизация процесса подбора временного персонала, сокращение времени и усилий на поиск, отбор и коммуникацию с кандидатами.

## Функционал

### 1. Создание вакансии и настройка анкеты
- Быстрое создание рекламного сообщения для вакансии
- Настройка анкеты с вопросами по умолчанию (ФИО, возраст, телефон, опыт)
- Возможность добавить свои вопросы
- Предпросмотр вакансии перед публикацией

### 2. Рассылка вакансий
- Автоматическая рассылка в выбранные чаты/группы
- Отправка по расписанию

### 3. Сбор и управление откликами
- Автоматический сбор анкет через кнопку "Откликнуться"
- Просмотр всех откликов в одном месте
- Уведомления работодателю о новых откликах

### 4. Экспорт и коммуникация
- Экспорт всех откликов в Excel
- Прямая связь с кандидатами через Telegram

## Архитектура

### Технологический стек
- **Backend**: Kotlin, Spring Boot 4.0.1
- **Database**: PostgreSQL 16
- **Migration**: Liquibase
- **Build**: Gradle (Kotlin DSL)
- **Java**: 21

### Схема базы данных

#### Основные таблицы:

**businesses** - бизнесы работодателей
- Хранит информацию о компаниях/работодателях
- Связь с Telegram через `telegram_chat_id`

**users** - все пользователи системы
- Единая таблица для админов бизнесов и кандидатов
- Идентификация через Telegram ID

**business_users** - связь пользователей с бизнесами
- Роли: ADMIN (полный доступ), MANAGER (ограниченный доступ)
- Junction table для связи многие-ко-многим

**vacancies** - вакансии
- Уникальный код для каждой вакансии (например, "ABC123")
- Статусы: DRAFT, ACTIVE, PAUSED, CLOSED

**questions** - вопросы анкет
- Типы: TEXT, YES_NO, CHOICE, PHONE, DATE, NUMBER
- Порядок отображения через `order_index`

**applications** - отклики кандидатов
- Статусы: NEW, VIEWED, CONTACTED, ACCEPTED, REJECTED
- Уникальность: один кандидат = один отклик на вакансию

**answers** - ответы на вопросы
- Связь с откликами и вопросами

### Система кодов вакансий

Каждая вакансия получает уникальный короткий буквенно-цифровой код (например, "ABC123"), который:
- Легко запоминается и произносится
- Используется кандидатами для быстрого отклика
- Гарантирует уникальность через database constraint

### Мультитенантность

Система поддерживает множество бизнесов через одного бота:
- Каждый бизнес изолирован через `business_id`
- Пользователи могут быть админами нескольких бизнесов
- Вакансии привязаны к конкретному бизнесу
- Отклики видны только владельцам соответствующего бизнеса

## Быстрый старт

### Требования
- Docker и Docker Compose
- Java 21
- Gradle 8.x

### Запуск базы данных

```bash
docker-compose up -d
```

Это поднимет PostgreSQL на порту 5432 с:
- Database: `jobzi`
- User: `jobzi`
- Password: `jobzi`

### Запуск приложения

**1. Создайте Telegram бота:**

- Найдите [@BotFather](https://t.me/BotFather) в Telegram
- Отправьте команду `/newbot`
- Следуйте инструкциям и получите токен

**2. Установите переменные окружения:**

```bash
export TELEGRAM_BOT_TOKEN="your-bot-token-from-botfather"
export TELEGRAM_BOT_USERNAME="your_bot_username"
```

**3. Запустите приложение:**

```bash
./gradlew bootRun
```

При первом запуске Liquibase автоматически применит все миграции и создаст необходимые таблицы.

**4. Создайте первого суперадмина:**

Узнайте свой Telegram ID через [@userinfobot](https://t.me/userinfobot), затем:

```bash
docker exec -it jobzi-postgres psql -U jobzi -d jobzi
```

```sql
INSERT INTO users (telegram_id, first_name, username, role, is_active)
VALUES (123456789, 'Ваше имя', 'your_username', 'SUPERADMIN', true);
```

Замените `123456789` на ваш реальный Telegram ID.

**5. Проверьте работу:**

Откройте бота в Telegram и напишите `/start` - вы должны увидеть приветствие суперадмина.

Подробная документация: [docs/SUPERADMIN.md](docs/SUPERADMIN.md)

### Проверка миграций

```bash
# Просмотр статуса миграций
./gradlew liquibaseStatus

# Откат последней миграции
./gradlew liquibaseRollbackCount -PliquibaseCommandValue=1
```

## Структура проекта

```
jobzi/
├── src/
│   ├── main/
│   │   ├── kotlin/
│   │   │   └── dev/weuizx/jobzi/
│   │   │       └── JobziApplication.kt
│   │   └── resources/
│   │       ├── application.yaml
│   │       └── db/
│   │           └── changelog/
│   │               ├── db.changelog-master.xml
│   │               └── changes/
│   │                   ├── 001-create-businesses-table.sql
│   │                   ├── 002-create-users-table.sql
│   │                   ├── 003-create-business-users-table.sql
│   │                   ├── 004-create-vacancies-table.sql
│   │                   ├── 005-create-questions-table.sql
│   │                   ├── 006-create-applications-table.sql
│   │                   └── 007-create-answers-table.sql
│   └── test/
├── build.gradle.kts
├── settings.gradle.kts
├── docker-compose.yml
└── README.md
```

## Ключевые преимущества

- ✅ Всё в Telegram — не нужно выходить из привычного мессенджера
- ✅ Не требует установки — работает на любом устройстве
- ✅ Быстрое создание вакансии — за 2-3 минуты
- ✅ Структурированные отклики — вся информация в одном формате
- ✅ Автоматизация рутины — рассылки, уведомления, экспорт
- ✅ Подходит для неформального найма — без резюме и сложностей

## Этапы разработки

### Этап 1: Инфраструктура ✅
- [x] Инициализация проекта
- [x] Настройка PostgreSQL и Docker
- [x] Настройка Liquibase
- [x] Создание схемы базы данных
- [x] Документация

### Этап 2: Telegram Bot Integration ✅
- [x] Интеграция Telegram Bot API
- [x] Базовые команды бота
- [x] Система суперадминов
- [x] Управление бизнесами (активация, блокировка)
- [x] Entity классы и репозитории
- [x] Сервисный слой (DbService, BusinessService)

### Этап 3: Управление вакансиями
- [ ] Создание вакансий
- [ ] Генерация уникальных кодов
- [ ] Настройка анкет
- [ ] Публикация вакансий

### Этап 4: Отклики и анкеты
- [ ] Форма отклика для кандидатов
- [ ] Валидация ответов
- [ ] Хранение откликов
- [ ] Уведомления работодателю

### Этап 5: Работа с кандидатами
- [ ] Просмотр откликов
- [ ] Изменение статусов
- [ ] Экспорт в Excel
- [ ] Прямая связь с кандидатами

### Этап 6: Рассылки и автоматизация
- [ ] Рассылка вакансий в чаты
- [ ] Расписание публикаций
- [ ] Автоматические уведомления
- [ ] Аналитика

## Лицензия

Proprietary - All rights reserved

## Контакты

Разработчик: dev.weuizx