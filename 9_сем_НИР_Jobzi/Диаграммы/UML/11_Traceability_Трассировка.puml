@startuml Traceability
title Диаграмма трассировки: Шаги процесса TO-BE → Требования → Функции

salt
{#
. | **№** | **Шаг процесса (TO-BE, автоматизированные)** | **Требования пользователя** | **Функции (Use Case)**
. | 1 | 2.3-2.4 Установить состояние и отправить запрос названия | Система ведет пошаговый диалог создания вакансии | UC-6: Создать вакансию
. | 2 | 2.6-2.8 Валидировать ввод, сохранить в контекст, запросить описание | Система валидирует данные и сохраняет промежуточное состояние | UC-6: Создать вакансию, UC-27: Валидация ввода
. | 3 | 2.10 Запросить локацию с возможностью пропустить | Необязательные поля должны пропускаться | UC-6: Создать вакансию
. | 4 | 2.12 Запросить зарплату с возможностью пропустить | Необязательные поля должны пропускаться | UC-6: Создать вакансию
. | 5 | 2.14-2.15 Сформировать и показать предпросмотр вакансии | Работодатель видит предпросмотр перед публикацией | UC-6: Создать вакансию
. | 6 | 2.17-2.18 Вызвать VacancyDbService, сгенерировать код ABC123 | Каждая вакансия имеет уникальный читаемый код | UC-6: Создать вакансию, UC-25: Генерация кода
. | 7 | 2.19 Создать запись в БД (vacancy_id, code, title, и др.) | Данные вакансии сохраняются структурированно | UC-6: Создать вакансию
. | 8 | 2.20 Отправить сообщение с подтверждением и кодом | Работодатель получает подтверждение и код | UC-6: Создать вакансию
. | 9 | 6.4 Валидировать формат кода vacancy (3 буквы + 3 цифры) | Система проверяет корректность кода | UC-22: Откликнуться, UC-27: Валидация ввода
. | 10 | 6.5 Проверить существование вакансии в БД (активные) | Отклик возможен только на активные вакансии | UC-22: Откликнуться
. | 11 | 6.6 Проверить дубли откликов в БД | Соискатель не может откликнуться повторно | UC-22: Откликнуться
. | 12 | 6.7-6.8 Показать детали вакансии и кнопки выбора | Соискатель видит полную информацию о вакансии | UC-22: Откликнуться
. | 13 | 7.1 Создать отклик в БД (status=NEW) | Отклик сохраняется сразу перед анкетированием | UC-22: Откликнуться
. | 14 | 7.2-7.3 Загрузить вопросы из БД и установить состояние | Система получает кастомные вопросы вакансии | UC-23: Заполнить анкету, UC-11: Стандартная анкета
. | 15 | 7.4 Показать вопрос с прогрессом (N из M) | Соискатель видит прогресс заполнения анкеты | UC-23: Заполнить анкету
. | 16 | 7.6 Валидировать ответ по типу (PHONE, NUMBER, DATE) | Система проверяет формат ответов | UC-23: Заполнить анкету, UC-27: Валидация ввода
. | 17 | 7.7 Сохранить ответ в БД со snapshot контекста вопроса | Ответы сохраняются с копией вопроса (защита от изменений) | UC-23: Заполнить анкету, UC-26: Snapshot контекста
. | 18 | 7.8 Отправить сообщение с подтверждением отправки | Соискатель получает подтверждение отправки | UC-23: Заполнить анкету
. | 19 | 7.9 Отправить уведомление работодателю с ключевыми данными | Работодатель получает уведомления о новых откликах | UC-15: Просмотр откликов
}

legend right
  **Легенда:**
  • Шаг процесса - автоматизированные шаги
    из Activity диаграмм TO-BE (зеленые)
  • Требования пользователя - описание
    ожидаемого поведения системы
  • Функции - Use Case из диаграммы
    вариантов использования

  **Статистика трассировки:**
  • Автоматизированных шагов: 19
  • Требований: 19
  • Функций Use Case: 8 (UC-6, UC-11,
    UC-15, UC-22, UC-23, UC-25, UC-26, UC-27)
  • Покрытие: 100%

  **Ключевые функции:**
  • UC-25: Генерация уникального кода
  • UC-26: Snapshot контекста ответов
  • UC-27: Валидация ввода
end legend

@enduml
