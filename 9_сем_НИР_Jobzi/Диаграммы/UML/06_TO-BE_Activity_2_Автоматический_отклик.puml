@startuml TO-BE_Activity_2_Auto_Processing
title –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è TO-BE: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–ª–∏–∫–æ–≤ (–∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã–¥–µ–ª–µ–Ω—ã —Ü–≤–µ—Ç–æ–º)

skinparam activity {
  BackgroundColor<<Changed>> Orange
  BorderColor<<Changed>> DarkOrange
}

|#LightYellow|–°–æ–∏—Å–∫–∞—Ç–µ–ª—å (—É—á–∞—Å—Ç–Ω–∏–∫)|
|#LightBlue|Jobzi Bot (—Å–∏—Å—Ç–µ–º–∞)|
|#LightPink|PostgreSQL (—Å–∏—Å—Ç–µ–º–∞)|
|#LightGray|–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å (—É—á–∞—Å—Ç–Ω–∏–∫)|

|–°–æ–∏—Å–∫–∞—Ç–µ–ª—å (—É—á–∞—Å—Ç–Ω–∏–∫)|
start
:–£–≤–∏–¥–µ—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ\n—Å –∫–æ–¥–æ–º ABC123;
note right
  **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
  ‚Ä¢ –û–±—ä—è–≤–ª–µ–Ω–∏–µ —Å –∫–æ–¥–æ–º
  ‚Ä¢ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è /apply ABC123
end note

:–û—Ç–∫—Ä—ã—Ç—å @JobziBot; <<Changed>>
:–í–≤–µ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—É:\n/apply ABC123; <<Changed>>
note right
  **–ò–ó–ú–ï–ù–ï–ù–ò–ï:**
  –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å –∫–æ–¥–æ–º
  –í–º–µ—Å—Ç–æ "–ò–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç" / "–•–æ—á—É"
end note

|Jobzi Bot (—Å–∏—Å—Ç–µ–º–∞)|
:–í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –∫–æ–¥–∞\n[A-Z]{3}\\d{3}; <<Changed>>
note right
  **–ò–ó–ú–ï–ù–ï–ù–ò–ï:**
  –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
end note

if (–§–æ—Ä–º–∞—Ç –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω?) then (–ù–µ—Ç)
  :–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:\n"–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∫–æ–¥.\n–ü—Ä–∏–º–µ—Ä: ABC123"; <<Changed>>
  stop
endif

|PostgreSQL (—Å–∏—Å—Ç–µ–º–∞)|
:SELECT * FROM vacancies\nWHERE code = 'ABC123'\nAND status = 'ACTIVE'; <<Changed>>

if (–í–∞–∫–∞–Ω—Å–∏—è –Ω–∞–π–¥–µ–Ω–∞?) then (–ù–µ—Ç)
  |Jobzi Bot (—Å–∏—Å—Ç–µ–º–∞)|
  :–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:\n"–í–∞–∫–∞–Ω—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞\n–∏–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞";
  stop
else (–î–∞)
  note right
    **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
    ‚Ä¢ vacancy_id
    ‚Ä¢ vacancy –¥–∞–Ω–Ω—ã–µ
  end note
endif

|PostgreSQL (—Å–∏—Å—Ç–µ–º–∞)|
:SELECT * FROM applications\nWHERE vacancy_id = X\nAND user_id = Y; <<Changed>>
note right
  **–ò–ó–ú–ï–ù–ï–ù–ò–ï:**
  –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–µ–π
end note

if (–û—Ç–∫–ª–∏–∫ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?) then (–î–∞)
  |Jobzi Bot (—Å–∏—Å—Ç–µ–º–∞)|
  :–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:\n"–í—ã —É–∂–µ –æ—Ç–∫–ª–∏–∫–Ω—É–ª–∏—Å—å\n–Ω–∞ —ç—Ç—É –≤–∞–∫–∞–Ω—Å–∏—é"; <<Changed>>
  stop
endif

|Jobzi Bot (—Å–∏—Å—Ç–µ–º–∞)|
:–ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –≤–∞–∫–∞–Ω—Å–∏–∏:
* –ù–∞–∑–≤–∞–Ω–∏–µ
* –û–ø–∏—Å–∞–Ω–∏–µ
* –õ–æ–∫–∞—Ü–∏—è
* –ó–∞—Ä–ø–ª–∞—Ç–∞; <<Changed>>
:–ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏:\n[‚úÖ –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è] [‚ùå –û—Ç–º–µ–Ω–∞]; <<Changed>>
note right
  **–ò–ó–ú–ï–ù–ï–ù–ò–ï:**
  –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤–∞–∫–∞–Ω—Å–∏–∏ –ø–µ—Ä–µ–¥ –æ—Ç–∫–ª–∏–∫–æ–º
end note

|–°–æ–∏—Å–∫–∞—Ç–µ–ª—å (—É—á–∞—Å—Ç–Ω–∏–∫)|
:–ü—Ä–æ—á–∏—Ç–∞—Ç—å –¥–µ—Ç–∞–ª–∏;
:–ù–∞–∂–∞—Ç—å "‚úÖ –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è";

|PostgreSQL (—Å–∏—Å—Ç–µ–º–∞)|
:INSERT INTO applications\n(vacancy_id, user_id,\nstatus='NEW',\ncreated_at=NOW()); <<Changed>>
note right
  **–ò–ó–ú–ï–ù–ï–ù–ò–ï:**
  –û—Ç–∫–ª–∏–∫ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –≤ –ë–î
  **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
  ‚Ä¢ application_id
end note

|Jobzi Bot (—Å–∏—Å—Ç–µ–º–∞)|
:SELECT * FROM questions\nWHERE vacancy_id = X\nORDER BY order_index; <<Changed>>
note right
  **–ò–ó–ú–ï–ù–ï–ù–ò–ï:**
  –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∞–Ω–∫–µ—Ç–∞ –∏–∑ –ë–î
end note

:–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ\nAPPLICATION_QUESTION_{N}; <<Changed>>

repeat
  |Jobzi Bot (—Å–∏—Å—Ç–µ–º–∞)|
  :–ü–æ–∫–∞–∑–∞—Ç—å –≤–æ–ø—Ä–æ—Å {N}/{M}:\n"{question_text}"\n[–ü—Ä–æ–≥—Ä–µ—Å—Å: ‚ñì‚ñì‚ñì‚ñë‚ñë‚ñë‚ñë‚ñë]; <<Changed>>
  note right
    **–ò–ó–ú–ï–ù–ï–ù–ò–ï:**
    –ò–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    –¢–∏–ø—ã –≤–æ–ø—Ä–æ—Å–æ–≤:
    ‚Ä¢ TEXT, PHONE, NUMBER
    ‚Ä¢ DATE, YES_NO, CHOICE
  end note

  |–°–æ–∏—Å–∫–∞—Ç–µ–ª—å (—É—á–∞—Å—Ç–Ω–∏–∫)|
  :–í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç;
  note right
    **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
    ‚Ä¢ –í–æ–ø—Ä–æ—Å –æ—Ç –±–æ—Ç–∞
    **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
    ‚Ä¢ –û—Ç–≤–µ—Ç (—Ç–µ–∫—Å—Ç/—á–∏—Å–ª–æ/–¥–∞—Ç–∞)
  end note

  |Jobzi Bot (—Å–∏—Å—Ç–µ–º–∞)|
  :–í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ç–∏–ø—É:
  * PHONE: +7XXXXXXXXXX
  * NUMBER: —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã
  * DATE: —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã; <<Changed>>
  note right
    **–ò–ó–ú–ï–ù–ï–ù–ò–ï:**
    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É
  end note

  if (–í–∞–ª–∏–¥–∞—Ü–∏—è OK?) then (–ù–µ—Ç)
    :–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:\n"–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç.\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞"; <<Changed>>
  else (–î–∞)
    |PostgreSQL (—Å–∏—Å—Ç–µ–º–∞)|
    :INSERT INTO answers\n(application_id,\nquestion_id,\nanswer_text,\nquestion_text [snapshot],\nquestion_type [snapshot],\nquestion_order [snapshot]); <<Changed>>
    note right
      **–ò–ó–ú–ï–ù–ï–ù–ò–ï:**
      Snapshot –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤–æ–ø—Ä–æ—Å–∞
      –ó–∞—â–∏—Ç–∞ –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–æ–ø—Ä–æ—Å–∞
      –ø–æ—Å–ª–µ –æ—Ç–∫–ª–∏–∫–∞
    end note

    |Jobzi Bot (—Å–∏—Å—Ç–µ–º–∞)|
    :–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç; <<Changed>>
    :–ü–µ—Ä–µ–π—Ç–∏ –∫\n—Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É; <<Changed>>
  endif

repeat while (–ï—Å—Ç—å –µ—â–µ –≤–æ–ø—Ä–æ—Å—ã?) is (–î–∞)
->–ù–µ—Ç;

|Jobzi Bot (—Å–∏—Å—Ç–µ–º–∞)|
:–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:\n"‚úÖ –û—Ç–∫–ª–∏–∫ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!\n–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏–ª\n—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ"; <<Changed>>
note right
  **–ò–ó–ú–ï–ù–ï–ù–ò–ï:**
  –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
end note

|–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å (—É—á–∞—Å—Ç–Ω–∏–∫)|
:–ü–æ–ª—É—á–∏—Ç—å Telegram\n—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:\n"üì© –ù–æ–≤—ã–π –æ—Ç–∫–ª–∏–∫ –Ω–∞ ABC123\n–ò–º—è: –ò–≤–∞–Ω\n–¢–µ–ª–µ—Ñ–æ–Ω: +79001234567"; <<Changed>>
note right
  **–ò–ó–ú–ï–ù–ï–ù–ò–ï:**
  –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  —Å –∫–ª—é—á–µ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
  **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
  ‚Ä¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—é
end note

:–û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –∏\n–ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏; <<Changed>>

|PostgreSQL (—Å–∏—Å—Ç–µ–º–∞)|
:UPDATE applications\nSET status = 'VIEWED'\nWHERE application_id = X; <<Changed>>
note right
  **–ò–ó–ú–ï–ù–ï–ù–ò–ï:**
  –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
end note

|–°–æ–∏—Å–∫–∞—Ç–µ–ª—å (—É—á–∞—Å—Ç–Ω–∏–∫)|
:–î–æ–∂–¥–∞—Ç—å—Å—è –æ—Ç–≤–µ—Ç–∞\n–æ—Ç —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è;

stop

legend right
  **–õ–µ–≥–µ–Ω–¥–∞:**
  –°–æ–∏—Å–∫–∞—Ç–µ–ª—å, –†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å - —É—á–∞—Å—Ç–Ω–∏–∫–∏ (–ª—é–¥–∏)
  Jobzi Bot, PostgreSQL - —Å–∏—Å—Ç–µ–º—ã

  **–û—Ä–∞–Ω–∂–µ–≤—ã–π —Ü–≤–µ—Ç** = –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å AS-IS

  **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ TO-BE:**
  1. –í—Ä–µ–º—è: 30 —Å–µ–∫ - 1 –º–∏–Ω (–≤–º–µ—Å—Ç–æ 5-15 –º–∏–Ω)
  2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
  3. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞–Ω–∫–µ—Ç–∞
  4. Snapshot –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–∑–∞—â–∏—Ç–∞ –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π)
  5. –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π
  6. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è
  7. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
  8. –ù–µ—Ç –ø–µ—Ä–µ—Å–ø—Ä–æ—Å–æ–≤ (–≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–±—Ä–∞–Ω—ã –∑–∞ —Ä–∞–∑)
end legend

@enduml
