@startuml TO-BE_Activity_2_Bot_Vacancy
title Декомпозиция TO-BE: Шаг 2 - Создать вакансию (через бота)

skinparam activity {
  BackgroundColor<<Automated>> LightGreen
  BorderColor<<Automated>> DarkGreen
}

|Входные/Выходные объекты|Шаг процесса|Роль: Работодатель|Роль: Jobzi Bot|Роль: PostgreSQL|

start

|Входные/Выходные объекты|
note right
  **Входные данные:**
  • Требования к вакансии
  • Срочность поиска
end note

|Роль: Работодатель|
:2.1. Открыть Telegram
и запустить @JobziBot;

|Роль: Работодатель|
:2.2. Нажать кнопку
"➕ Новая вакансия";

|Роль: Jobzi Bot|
:2.3. Установить состояние
VACANCY_CREATE_TITLE; <<Automated>>

|Роль: Jobzi Bot|
:2.4. Отправить запрос:
"Введите название вакансии"; <<Automated>>

|Входные/Выходные объекты|
note right
  **Выходные данные:**
  • Пошаговый запрос
  • Понятные инструкции
end note

|Роль: Работодатель|
:2.5. Ввести название
(например: "Разнорабочий");

|Роль: Jobzi Bot|
:2.6. Валидировать ввод
(не пустое); <<Automated>>

|Роль: Jobzi Bot|
:2.7. Сохранить в
ConversationContext; <<Automated>>

|Роль: Jobzi Bot|
:2.8. Запросить описание
работы; <<Automated>>

|Роль: Работодатель|
:2.9. Ввести описание;

|Роль: Jobzi Bot|
:2.10. Запросить локацию
[Пропустить]; <<Automated>>

|Роль: Работодатель|
:2.11. Ввести локацию
или пропустить;

|Роль: Jobzi Bot|
:2.12. Запросить зарплату
[Пропустить]; <<Automated>>

|Роль: Работодатель|
:2.13. Ввести зарплату
или пропустить;

|Роль: Jobzi Bot|
:2.14. Сформировать
предпросмотр; <<Automated>>

|Роль: Jobzi Bot|
:2.15. Показать предпросмотр
[✅ Опубликовать]; <<Automated>>

|Входные/Выходные объекты|
note right
  **Выходные данные:**
  • Форматированное
    объявление
  • Возможность проверки
end note

|Роль: Работодатель|
:2.16. Проверить и нажать
"✅ Опубликовать";

|Роль: Jobzi Bot|
:2.17. Вызвать
VacancyDbService
.createVacancy(); <<Automated>>

|Роль: PostgreSQL|
:2.18. Сгенерировать
уникальный код (ABC123); <<Automated>>

|Роль: PostgreSQL|
:2.19. Создать запись в БД:
• vacancy_id
• business_id
• code = "ABC123"
• title, description
• location, salary
• status = ACTIVE; <<Automated>>

|Входные/Выходные объекты|
note right
  **Выходные данные:**
  • vacancy_id
  • vacancy_code
  • Структурированные
    данные в БД
end note

|Роль: Jobzi Bot|
:2.20. Отправить сообщение:
"✅ Вакансия создана!
Код: ABC123"; <<Automated>>

|Входные/Выходные объекты|
note right
  **Итоговые выходные данные:**
  • Вакансия в БД (ACTIVE)
  • Уникальный код ABC123
  • Время: 2-3 минуты
    (вместо 30-40 минут)
  • Снижение времени: 93%
end note

stop

legend right
  **Декомпозиция шага 2 макроуровня TO-BE**

  **Участники:**
  • Работодатель - человек
  • Jobzi Bot - система (автоматизация)
  • PostgreSQL - система (автоматизация)

  **Шаги с автоматизацией (зеленый цвет):**
  2.3-2.4, 2.6-2.8, 2.10, 2.12, 2.14-2.15,
  2.17-2.20

  **Преимущества:**
  1. Время: 2-3 минуты (↓93%)
  2. Пошаговые подсказки
  3. Валидация данных
  4. Предпросмотр
  5. Автоматический код
  6. Структурированное хранение
end legend

@enduml
