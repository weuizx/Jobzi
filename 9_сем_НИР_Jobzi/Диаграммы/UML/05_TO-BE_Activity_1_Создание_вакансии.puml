@startuml TO-BE_Activity_2_Bot_Vacancy
title Декомпозиция TO-BE: Шаг 2 - Создать вакансию (через бота)

skinparam activity {
  BackgroundColor<<Automated>> LightGreen
  BorderColor<<Automated>> DarkGreen
}

|Входные/Выходные объекты|
start
note right
  **Входные данные:**
  • Требования к вакансии
  • Срочность поиска
end note

|Шаг процесса|
:2.1. Открыть Telegram
и запустить @JobziBot;

|Роль: Работодатель|
:Запускает бота
в Telegram;

|Шаг процесса|
:2.2. Нажать кнопку
"➕ Новая вакансия";

|Роль: Работодатель|
:Нажимает кнопку
в интерфейсе бота;

|Шаг процесса|
:2.3. Установить состояние
VACANCY_CREATE_TITLE; <<Automated>>

|Роль: Jobzi Bot|
:Система устанавливает
состояние диалога; <<Automated>>

|Шаг процесса|
:2.4. Отправить запрос:
"Введите название вакансии"; <<Automated>>

|Роль: Jobzi Bot|
:Система отправляет
сообщение с инструкцией; <<Automated>>

|Входные/Выходные объекты|
note right
  **Выходные данные:**
  • Пошаговый запрос
  • Понятные инструкции
end note

|Шаг процесса|
:2.5. Ввести название
(например: "Разнорабочий");

|Роль: Работодатель|
:Вводит название
вакансии;

|Шаг процесса|
:2.6. Валидировать ввод
(не пустое); <<Automated>>

|Роль: Jobzi Bot|
:Система проверяет
что поле не пустое; <<Automated>>

|Шаг процесса|
:2.7. Сохранить в
ConversationContext; <<Automated>>

|Роль: Jobzi Bot|
:Система сохраняет
в контекст диалога; <<Automated>>

|Шаг процесса|
:2.8. Запросить описание
работы; <<Automated>>

|Роль: Jobzi Bot|
:Система запрашивает
следующее поле; <<Automated>>

|Шаг процесса|
:2.9. Ввести описание;

|Роль: Работодатель|
:Вводит описание
работы;

|Шаг процесса|
:2.10. Запросить локацию
[Пропустить]; <<Automated>>

|Роль: Jobzi Bot|
:Система запрашивает
локацию с кнопкой пропуска; <<Automated>>

|Шаг процесса|
:2.11. Ввести локацию
или пропустить;

|Роль: Работодатель|
:Вводит локацию
или пропускает;

|Шаг процесса|
:2.12. Запросить зарплату
[Пропустить]; <<Automated>>

|Роль: Jobzi Bot|
:Система запрашивает
зарплату с кнопкой пропуска; <<Automated>>

|Шаг процесса|
:2.13. Ввести зарплату
или пропустить;

|Роль: Работодатель|
:Вводит зарплату
или пропускает;

|Шаг процесса|
:2.14. Сформировать
предпросмотр; <<Automated>>

|Роль: Jobzi Bot|
:Система форматирует
данные для предпросмотра; <<Automated>>

|Шаг процесса|
:2.15. Показать предпросмотр
[✅ Опубликовать]; <<Automated>>

|Роль: Jobzi Bot|
:Система показывает
результат с кнопками; <<Automated>>

|Входные/Выходные объекты|
note right
  **Выходные данные:**
  • Форматированное
    объявление
  • Возможность проверки
end note

|Шаг процесса|
:2.16. Проверить и нажать
"✅ Опубликовать";

|Роль: Работодатель|
:Проверяет и подтверждает
публикацию;

|Шаг процесса|
:2.17. Вызвать
VacancyDbService
.createVacancy(); <<Automated>>

|Роль: Jobzi Bot|
:Система вызывает
сервис создания; <<Automated>>

|Шаг процесса|
:2.18. Сгенерировать
уникальный код (ABC123); <<Automated>>

|Роль: PostgreSQL|
:Система генерирует
уникальный код; <<Automated>>

|Шаг процесса|
:2.19. Создать запись в БД:
• vacancy_id
• business_id
• code = "ABC123"
• title, description
• location, salary
• status = ACTIVE; <<Automated>>

|Роль: PostgreSQL|
:БД сохраняет
структурированные данные; <<Automated>>

|Входные/Выходные объекты|
note right
  **Выходные данные:**
  • vacancy_id
  • vacancy_code
  • Структурированные
    данные в БД
end note

|Шаг процесса|
:2.20. Отправить сообщение:
"✅ Вакансия создана!
Код: ABC123"; <<Automated>>

|Роль: Jobzi Bot|
:Система отправляет
подтверждение с кодом; <<Automated>>

|Входные/Выходные объекты|
note right
  **Итоговые выходные данные:**
  • Вакансия в БД (ACTIVE)
  • Уникальный код ABC123
  • Время: 2-3 минуты
    (вместо 30-40 минут)
  • Снижение времени: 93%
end note

stop

legend right
  **Декомпозиция шага 2 макроуровня TO-BE**

  **3 колонки UML Activity:**
  1. Входные/Выходные объекты - данные
  2. Шаг процесса - действия с нумерацией
  3. Роль - исполнитель

  **Участники:**
  • Работодатель - человек
  • Jobzi Bot - система (автоматизация)
  • PostgreSQL - система (автоматизация)

  **Шаги с автоматизацией (зеленый цвет):**
  2.3-2.4, 2.6-2.8, 2.10, 2.12, 2.14-2.15,
  2.17-2.20

  **Преимущества:**
  1. Время: 2-3 минуты (↓93%)
  2. Пошаговые подсказки
  3. Валидация данных
  4. Предпросмотр
  5. Автоматический код
  6. Структурированное хранение
end legend

@enduml
